@isTest
private class B2bBusAssignmentDetailsCtrlTest {
    @isTest static void fetchServiceIdTest1(){

        Service_Provider__c sp=new Service_Provider__c();
        sp.BO_Number__c='45678';
        sp.BO_Number2__c='67890'; 
        sp.Operator_Id__c='16418';
        insert sp;
        
        Order_Items__c ordItem = new Order_Items__c();
        ordItem.Route_Id__c = '14460805';
        ordItem.Order_Item_Reference_No__c ='78QGHRVX';
        ordItem.Boarding_Time__c = System.now();
        ordItem.Service_Provider_Info__c=sp.id;
        insert ordItem;

        Test.startTest();
        string json = '{"14460805":"1115","8995991":"227","21605663":"343","16592543":"1048","10753179":"820","19054008":"1102","13082764":"956","16977963":"265","18920471":"1110","18740315":"1098","8558109":"552","8573837":"553","9658806":"717","5121114":"105","20878793":"1126","17574625":"675","9946265":"334","17574628":"675","12115188":"887","4218426":"3","23599460":"1182","14236009":"812","9172523":"424","18807673":"1098","14236008":"812","17791549":"227","4543509":"227","20878794":"1126","12365154":"913","20878797":"1126","20121331":"984","17677669":"1085","18958500":"225","18964363":"1104","5115466":"105","24500424":"597","18920509":"1110","17368124":"1073","25339755":"1189","16139984":"1027","17368130":"1073","17791550":"227","24500421":"597","20247347":"1136","9665440":"597","12581762":"927","18852495":"1104","19888757":"449","19655336":"1126","13902017":"981","8568355":"553","19206850":"89","8570333":"553","8231308":"409","8565631":"552","10648119":"817","19206787":"290","8141114":"290","17216614":"1074","18958498":"225","19188600":"553","20040027":"290","20391890":"1141","16262402":"812","21784330":"1163","24500429":"597","19655339":"1126","20878790":"1126","26881575":"1215","21784328":"1163","20055594":"1127","4524606":"225","18718614":"1095","17791565":"227","13904379":"981","19187594":"3","19186842":"1033","19493971":"636","18919340":"1109","19216356":"637","18572775":"1091","13904959":"981","19132483":"32","18920468":"1110","14383962":"981","10752105":"820","14861791":"227","14091318":"983","17791554":"227","18919341":"1109","16977959":"265","18845874":"373","18724603":"1100","24500426":"597","13257729":"963","10752053":"820","18919352":"1109","14383927":"981","8881548":"450","16262403":"812","17791553":"227","20878791":"1126","19187243":"552","18919326":"1109","13636280":"675","12115189":"887","23599128":"1182","9575771":"674","9940516":"449","8663477":"578","18718606":"1095","16123063":"1027","18740294":"1098","13904504":"981","13902045":"981","18724424":"1100","19186506":"812","8141448":"290","18866260":"1095","19187251":"552","18919331":"1109","9136120":"675","19188615":"553","19360375":"553","16262472":"1033","13902044":"981","12031580":"886","14383934":"981","9362255":"715","18919365":"1109","18724520":"1099","9919651":"105","16262469":"1033","19449574":"1115","10662285":"817","19350589":"552","16262398":"812","17124290":"1072","10274375":"804","17216592":"1074","19186513":"812","19132486":"32","20391788":"1140","14383905":"981","26745382":"1034","9660946":"717","5057840":"323","13902024":"981","10849041":"826","18919357":"1109","17791552":"227","10115949":"717","14383924":"981","14214561":"991","18852496":"1104","13905052":"981","19109676":"768","9476174":"739","16262397":"812","8296049":"450","19206772":"265","20391884":"1141","19188607":"553","17791546":"227","14383936":"981","19187255":"552","19109927":"32","20033409":"1130","4361420":"104","12608961":"933","18724521":"1099","18866283":"1098","8692303":"584","13902020":"981","10849044":"826","13940552":"981","11762306":"657","16922294":"141","10272630":"804","13904877":"981","16592540":"1048","19109932":"32","13257731":"963","19251458":"812","12031578":"886","19186845":"1033","17791547":"227","19109926":"32","12031524":"887","21993238":"1164","10649809":"819","14383912":"981","14379453":"1000","18725191":"1099","8348948":"477","12928508":"944","18740320":"1098","12608957":"933","14383900":"981","19250349":"1033","12581763":"927","19187250":"552","10982575":"795","13902034":"981","23599458":"1182","14383954":"981","19188596":"553","18719015":"1095","18920470":"1110","17791571":"227","17791568":"227","19213648":"1113","20182333":"804","17216584":"1074","20040387":"1104","16262465":"1033","14197493":"989","8573835":"553","10266230":"104","19206814":"1104","18542488":"1090","17216586":"1074","18807539":"1095","17471199":"1080","14041274":"982","12934620":"946","16917888":"141","21993244":"1164","13082762":"956","12645761":"933","20247351":"1136","8231429":"409","16030091":"1022","20391793":"1140","13904391":"981","10849042":"826","17791572":"227","18920469":"1110","16907584":"1059","19251450":"812","10648132":"817","17368112":"1073","8220647":"364","12606957":"933","17574623":"675","10001998":"768","13263401":"963","12031527":"887","16123057":"1027","10276059":"120","12608959":"932","19187244":"552","17368111":"1073","13083139":"957","18920463":"1110","14041270":"982","10471771":"807","19302728":"373","16262466":"1033","17783954":"227","19300440":"1115","19186851":"1033","12581755":"927","19350588":"552","18719024":"1095","19655345":"1126","24500420":"597","9729693":"758","21740607":"1162","19131803":"768","18718987":"1095","16977875":"265","19187234":"552","17471195":"1080","19131801":"768","17216610":"1074","19206798":"1104","9546505":"739","12608960":"932","18718603":"1095","19110303":"1110","18572776":"1091","20391694":"1139","20010318":"1127","16592542":"1048","13902014":"981","17791558":"227","19206852":"89","19360377":"552","20391885":"1141","19187248":"552","16030100":"1022","14389519":"1004","8303367":"450","9130069":"675","17216589":"1074","19206799":"1104","19186857":"1033","10004212":"768","19186841":"1033","19324927":"373","11002738":"854","16262473":"1033","13083134":"957","9666663":"717","13940030":"981","24500430":"597","9878283":"717","19186507":"812","19206782":"290","8566352":"552","19187238":"552","18740317":"1098","11053889":"793","17689610":"1086","14383901":"981","19188591":"553","18919325":"1109","20391687":"1139","13902047":"981","19187235":"552","19131788":"768","17368121":"1073","19411888":"1105","18718999":"1095","17574627":"675","22535912":"1170","13642593":"675","20391889":"1141","19216274":"913","24500431":"597","20391791":"1140","19484635":"553","14383933":"981","14150654":"985","17791556":"227","19449576":"1116","8303366":"450","20391781":"1140","20878784":"1126","10982658":"795","14383907":"981","8007689":"227","14383935":"981","14153739":"984","8565652":"553","14236012":"812","23960712":"1059","16130922":"1027","14150656":"985","9130002":"675","5059055":"323","16509826":"1046","18724522":"1099","9826102":"32","18919364":"1109","14383925":"981","15793751":"972","8565649":"553","4543477":"227","18845875":"373","18920479":"1110","18740297":"1098","9666284":"758","13940065":"981","11762307":"657","12928504":"944","19188590":"553","20878787":"1126","14214563":"991","17589981":"982","18919380":"1109","19206168":"812","19188594":"553","8995806":"3","12094521":"675","9130006":"674","9477121":"739","9104322":"636","20010315":"1127","17589977":"982","18920488":"1110","19187236":"552","19206855":"89","13904252":"981","20033411":"1130","14091322":"983","20121332":"984","4466566":"141","26881577":"1215","14380498":"1002","18919323":"1109","21993246":"1164","17791548":"227","4744807":"265","18718998":"1095","13902038":"981","19655343":"1126","11095189":"856","4415134":"105","18572774":"1091","13582199":"976","18719089":"1098","18919348":"1109","19186853":"1033","18919335":"1109","4922925":"141","14859794":"227","18867763":"1095","8565632":"552","19206788":"290","19360380":"552","23901103":"1090","8141118":"290","19186843":"1033","25300983":"1188","19187240":"552","17368131":"1073","13083132":"957","19302730":"373","18719082":"1098","18920465":"1110","13904392":"981","19187233":"552","12928502":"944","16922292":"106","8860750":"597","18920475":"1110","13904266":"981","20391677":"1138","5062741":"334","17216575":"1074","9658729":"758","18919329":"1109","10665878":"821","19206783":"290","10001457":"323","14197437":"989","8996727":"637","18852498":"1104","5057932":"323","19187635":"225","18920472":"1110","16290842":"1034","14383916":"981","12581758":"927","8296044":"449","11002740":"854","19110307":"1110","14383898":"981","20391882":"1141","9011799":"636","12365153":"913","23599456":"1182","17471197":"1080","19187595":"3","19350580":"552","16262474":"1033","13902039":"981","15793753":"972","26745381":"1034","21993247":"1164","14237953":"812","19131800":"768","8999591":"636","18852497":"1104","23599462":"1182","20247348":"1136","19300549":"1116","12031294":"886","18718989":"1095","19186494":"812","16262401":"812","17574622":"675","19187249":"552","25300984":"1188","8567363":"553","8231390":"409","20010363":"1128","19206853":"89","16989412":"636","19187257":"552","18919361":"1109","14383950":"981","20033412":"1130","22535911":"1170","12934627":"946","19186501":"812","16262468":"1033","19351245":"553","9362409":"715","11007502":"855","10974616":"850","16030090":"1022","19186847":"1033","17216571":"1074","20040389":"1104","19132480":"32","16030418":"1023","14041280":"982","24500428":"597","8860724":"597","21213672":"1157","20025247":"1129","4776704":"265","8559802":"552","19188589":"553","19300444":"1115","17124233":"1071","8573836":"553","17589979":"982","18740304":"1098","9362246":"715","19186510":"812","14236010":"812","18919378":"1109","19206771":"265","17574621":"675","18724425":"1100","14197579":"989","8565644":"553","18633394":"1094","19188604":"553","18725184":"1100","13642289":"637","19350582":"552","19186512":"812","18815126":"1102","13737592":"963","11007172":"855","23100335":"409","12031295":"886","16030096":"1022","16907586":"1059","19188616":"553","14383911":"981","25300985":"1188","8565640":"552","19302666":"106","14383930":"981","9001319":"636","18725185":"1100","14150446":"985","10651981":"819","16660131":"913","8565653":"553","12140271":"893","18920467":"1110","21993237":"1164","19350584":"552","14041269":"982","12645760":"933","8573834":"553","14091320":"983","10665835":"821","21213677":"1157","13582191":"976","19655323":"1126","16140630":"1027","14236004":"812","17589975":"982","19110304":"1110","23599120":"1182","19351244":"553","9129979":"674","8303369":"449","19206797":"1104","14041276":"982","16509833":"1046","8564878":"552","5057606":"323","18724525":"1099","23100326":"408","14389515":"1004","17368129":"1073","5062769":"334","18718991":"1095","5120953":"104"}';
        Test.setMock(HttpCalloutMock.class, new RestClientHTTPMocks(200, 'OK', json));
        B2bBusAssignmentDetailsCtrl.fetchServiceId(String.valueOf(ordItem.Id));
        Test.stopTest();
    }

    @isTest static void fetchServiceIdTest2(){

        Service_Provider__c sp=new Service_Provider__c();
        sp.BO_Number__c='45678';
        sp.BO_Number2__c='67890'; 
        sp.Operator_Id__c='16418';
        insert sp;
        
        Order_Items__c ordItem = new Order_Items__c();
        ordItem.Route_Id__c = '14460805';
        ordItem.Order_Item_Reference_No__c ='78QGHRVX';
        ordItem.Boarding_Time__c = System.now();
        ordItem.Service_Provider_Info__c=sp.id;
        insert ordItem;

        Test.startTest();
        string json = '{"899599":"1115","8995991":"14460805","21605663":"343","16592543":"1048","10753179":"820","19054008":"1102","13082764":"956","16977963":"265","18920471":"1110","18740315":"1098","8558109":"552","8573837":"553","9658806":"717","5121114":"105","20878793":"1126","17574625":"675","9946265":"334","17574628":"675","12115188":"887","4218426":"3","23599460":"1182","14236009":"812","9172523":"424","18807673":"1098","14236008":"812","17791549":"227","4543509":"227","20878794":"1126","12365154":"913","20878797":"1126","20121331":"984","17677669":"1085","18958500":"225","18964363":"1104","5115466":"105","24500424":"597","18920509":"1110","17368124":"1073","25339755":"1189","16139984":"1027","17368130":"1073","17791550":"227","24500421":"597","20247347":"1136","9665440":"597","12581762":"927","18852495":"1104","19888757":"449","19655336":"1126","13902017":"981","8568355":"553","19206850":"89","8570333":"553","8231308":"409","8565631":"552","10648119":"817","19206787":"290","8141114":"290","17216614":"1074","18958498":"225","19188600":"553","20040027":"290","20391890":"1141","16262402":"812","21784330":"1163","24500429":"597","19655339":"1126","20878790":"1126","26881575":"1215","21784328":"1163","20055594":"1127","4524606":"225","18718614":"1095","17791565":"227","13904379":"981","19187594":"3","19186842":"1033","19493971":"636","18919340":"1109","19216356":"637","18572775":"1091","13904959":"981","19132483":"32","18920468":"1110","14383962":"981","10752105":"820","14861791":"227","14091318":"983","17791554":"227","18919341":"1109","16977959":"265","18845874":"373","18724603":"1100","24500426":"597","13257729":"963","10752053":"820","18919352":"1109","14383927":"981","8881548":"450","16262403":"812","17791553":"227","20878791":"1126","19187243":"552","18919326":"1109","13636280":"675","12115189":"887","23599128":"1182","9575771":"674","9940516":"449","8663477":"578","18718606":"1095","16123063":"1027","18740294":"1098","13904504":"981","13902045":"981","18724424":"1100","19186506":"812","8141448":"290","18866260":"1095","19187251":"552","18919331":"1109","9136120":"675","19188615":"553","19360375":"553","16262472":"1033","13902044":"981","12031580":"886","14383934":"981","9362255":"715","18919365":"1109","18724520":"1099","9919651":"105","16262469":"1033","19449574":"1115","10662285":"817","19350589":"552","16262398":"812","17124290":"1072","10274375":"804","17216592":"1074","19186513":"812","19132486":"32","20391788":"1140","14383905":"981","26745382":"1034","9660946":"717","5057840":"323","13902024":"981","10849041":"826","18919357":"1109","17791552":"227","10115949":"717","14383924":"981","14214561":"991","18852496":"1104","13905052":"981","19109676":"768","9476174":"739","16262397":"812","8296049":"450","19206772":"265","20391884":"1141","19188607":"553","17791546":"227","14383936":"981","19187255":"552","19109927":"32","20033409":"1130","4361420":"104","12608961":"933","18724521":"1099","18866283":"1098","8692303":"584","13902020":"981","10849044":"826","13940552":"981","11762306":"657","16922294":"141","10272630":"804","13904877":"981","16592540":"1048","19109932":"32","13257731":"963","19251458":"812","12031578":"886","19186845":"1033","17791547":"227","19109926":"32","12031524":"887","21993238":"1164","10649809":"819","14383912":"981","14379453":"1000","18725191":"1099","8348948":"477","12928508":"944","18740320":"1098","12608957":"933","14383900":"981","19250349":"1033","12581763":"927","19187250":"552","10982575":"795","13902034":"981","23599458":"1182","14383954":"981","19188596":"553","18719015":"1095","18920470":"1110","17791571":"227","17791568":"227","19213648":"1113","20182333":"804","17216584":"1074","20040387":"1104","16262465":"1033","14197493":"989","8573835":"553","10266230":"104","19206814":"1104","18542488":"1090","17216586":"1074","18807539":"1095","17471199":"1080","14041274":"982","12934620":"946","16917888":"141","21993244":"1164","13082762":"956","12645761":"933","20247351":"1136","8231429":"409","16030091":"1022","20391793":"1140","13904391":"981","10849042":"826","17791572":"227","18920469":"1110","16907584":"1059","19251450":"812","10648132":"817","17368112":"1073","8220647":"364","12606957":"933","17574623":"675","10001998":"768","13263401":"963","12031527":"887","16123057":"1027","10276059":"120","12608959":"932","19187244":"552","17368111":"1073","13083139":"957","18920463":"1110","14041270":"982","10471771":"807","19302728":"373","16262466":"1033","17783954":"227","19300440":"1115","19186851":"1033","12581755":"927","19350588":"552","18719024":"1095","19655345":"1126","24500420":"597","9729693":"758","21740607":"1162","19131803":"768","18718987":"1095","16977875":"265","19187234":"552","17471195":"1080","19131801":"768","17216610":"1074","19206798":"1104","9546505":"739","12608960":"932","18718603":"1095","19110303":"1110","18572776":"1091","20391694":"1139","20010318":"1127","16592542":"1048","13902014":"981","17791558":"227","19206852":"89","19360377":"552","20391885":"1141","19187248":"552","16030100":"1022","14389519":"1004","8303367":"450","9130069":"675","17216589":"1074","19206799":"1104","19186857":"1033","10004212":"768","19186841":"1033","19324927":"373","11002738":"854","16262473":"1033","13083134":"957","9666663":"717","13940030":"981","24500430":"597","9878283":"717","19186507":"812","19206782":"290","8566352":"552","19187238":"552","18740317":"1098","11053889":"793","17689610":"1086","14383901":"981","19188591":"553","18919325":"1109","20391687":"1139","13902047":"981","19187235":"552","19131788":"768","17368121":"1073","19411888":"1105","18718999":"1095","17574627":"675","22535912":"1170","13642593":"675","20391889":"1141","19216274":"913","24500431":"597","20391791":"1140","19484635":"553","14383933":"981","14150654":"985","17791556":"227","19449576":"1116","8303366":"450","20391781":"1140","20878784":"1126","10982658":"795","14383907":"981","8007689":"227","14383935":"981","14153739":"984","8565652":"553","14236012":"812","23960712":"1059","16130922":"1027","14150656":"985","9130002":"675","5059055":"323","16509826":"1046","18724522":"1099","9826102":"32","18919364":"1109","14383925":"981","15793751":"972","8565649":"553","4543477":"227","18845875":"373","18920479":"1110","18740297":"1098","9666284":"758","13940065":"981","11762307":"657","12928504":"944","19188590":"553","20878787":"1126","14214563":"991","17589981":"982","18919380":"1109","19206168":"812","19188594":"553","8995806":"3","12094521":"675","9130006":"674","9477121":"739","9104322":"636","20010315":"1127","17589977":"982","18920488":"1110","19187236":"552","19206855":"89","13904252":"981","20033411":"1130","14091322":"983","20121332":"984","4466566":"141","26881577":"1215","14380498":"1002","18919323":"1109","21993246":"1164","17791548":"227","4744807":"265","18718998":"1095","13902038":"981","19655343":"1126","11095189":"856","4415134":"105","18572774":"1091","13582199":"976","18719089":"1098","18919348":"1109","19186853":"1033","18919335":"1109","4922925":"141","14859794":"227","18867763":"1095","8565632":"552","19206788":"290","19360380":"552","23901103":"1090","8141118":"290","19186843":"1033","25300983":"1188","19187240":"552","17368131":"1073","13083132":"957","19302730":"373","18719082":"1098","18920465":"1110","13904392":"981","19187233":"552","12928502":"944","16922292":"106","8860750":"597","18920475":"1110","13904266":"981","20391677":"1138","5062741":"334","17216575":"1074","9658729":"758","18919329":"1109","10665878":"821","19206783":"290","10001457":"323","14197437":"989","8996727":"637","18852498":"1104","5057932":"323","19187635":"225","18920472":"1110","16290842":"1034","14383916":"981","12581758":"927","8296044":"449","11002740":"854","19110307":"1110","14383898":"981","20391882":"1141","9011799":"636","12365153":"913","23599456":"1182","17471197":"1080","19187595":"3","19350580":"552","16262474":"1033","13902039":"981","15793753":"972","26745381":"1034","21993247":"1164","14237953":"812","19131800":"768","8999591":"636","18852497":"1104","23599462":"1182","20247348":"1136","19300549":"1116","12031294":"886","18718989":"1095","19186494":"812","16262401":"812","17574622":"675","19187249":"552","25300984":"1188","8567363":"553","8231390":"409","20010363":"1128","19206853":"89","16989412":"636","19187257":"552","18919361":"1109","14383950":"981","20033412":"1130","22535911":"1170","12934627":"946","19186501":"812","16262468":"1033","19351245":"553","9362409":"715","11007502":"855","10974616":"850","16030090":"1022","19186847":"1033","17216571":"1074","20040389":"1104","19132480":"32","16030418":"1023","14041280":"982","24500428":"597","8860724":"597","21213672":"1157","20025247":"1129","4776704":"265","8559802":"552","19188589":"553","19300444":"1115","17124233":"1071","8573836":"553","17589979":"982","18740304":"1098","9362246":"715","19186510":"812","14236010":"812","18919378":"1109","19206771":"265","17574621":"675","18724425":"1100","14197579":"989","8565644":"553","18633394":"1094","19188604":"553","18725184":"1100","13642289":"637","19350582":"552","19186512":"812","18815126":"1102","13737592":"963","11007172":"855","23100335":"409","12031295":"886","16030096":"1022","16907586":"1059","19188616":"553","14383911":"981","25300985":"1188","8565640":"552","19302666":"106","14383930":"981","9001319":"636","18725185":"1100","14150446":"985","10651981":"819","16660131":"913","8565653":"553","12140271":"893","18920467":"1110","21993237":"1164","19350584":"552","14041269":"982","12645760":"933","8573834":"553","14091320":"983","10665835":"821","21213677":"1157","13582191":"976","19655323":"1126","16140630":"1027","14236004":"812","17589975":"982","19110304":"1110","23599120":"1182","19351244":"553","9129979":"674","8303369":"449","19206797":"1104","14041276":"982","16509833":"1046","8564878":"552","5057606":"323","18724525":"1099","23100326":"408","14389515":"1004","17368129":"1073","5062769":"334","18718991":"1095","5120953":"104"}';
        Test.setMock(HttpCalloutMock.class, new RestClientHTTPMocks(200, 'OK', json));
        B2bBusAssignmentDetailsCtrl.fetchServiceId(String.valueOf(ordItem.Id));
        Test.stopTest();
    }

    @isTest static void fetchServiceIdTest3(){

        Service_Provider__c sp=new Service_Provider__c();
        sp.BO_Number__c='45678';
        sp.BO_Number2__c='67890'; 
        sp.Operator_Id__c='16418';
        insert sp;
        
        Order_Items__c ordItem = new Order_Items__c();
        ordItem.Route_Id__c = '14460805';
        ordItem.Order_Item_Reference_No__c ='78QGHRVX';
        ordItem.Boarding_Time__c = System.now();
        ordItem.Service_Provider_Info__c=sp.id;
        insert ordItem;

        Test.startTest();
        B2bBusAssignmentDetailsCtrl.fetchServiceId(String.valueOf(ordItem.Id));
        Test.stopTest();
    }

    @isTest static void getBusAssignmentDetailsTest1(){

        Service_Provider__c sp=new Service_Provider__c();
        sp.BO_Number__c='45678';
        sp.BO_Number2__c='67890'; 
        sp.Operator_Id__c='16418';
        insert sp;
        
        Order_Items__c ordItem = new Order_Items__c();
        ordItem.Route_Id__c = '14460805';
        ordItem.Order_Item_Reference_No__c ='78QGHRVX';
        ordItem.Boarding_Time__c = System.now();
        ordItem.Service_Provider_Info__c=sp.id;
        insert ordItem;

        Test.startTest();
        string json = '{"status":200,"message":"","data":[{"operatorServiceNum":"BLR-Karwar Sleeper","vehicleNumber":"KA51AF1546","driverNumber":"09742677462","driverName":"R M D Manju Nellore","conductorNumber":null,"conductorName":null,"assignStatus":"YES","trackingType":"FULL","source":"Bangalore","destination":"Karwar","serviceNo":"GLTHBANGALORE-KARWAR-1000PM","passengerCount":16}]}';
        Test.setMock(HttpCalloutMock.class, new RestClientHTTPMocks(200, 'OK', json));
        B2bBusAssignmentDetailsCtrl.getBusAssignmentDetails(String.valueOf(ordItem.Id));
        Test.stopTest();
    }
}